import { DateUtil } from "./DateUtil";

export class MoodsUtil {
    static activities = [
        { id: 'work', icon: 'ðŸ’¼', name: 'å·¥ä½œ' },
        { id: 'study', icon: 'ðŸ“š', name: 'å­¦ä¹ ' },
        { id: 'rest', icon: 'ðŸ›Œ', name: 'ä¼‘æ¯' },
        { id: 'sport', icon: 'ðŸƒ', name: 'è¿åŠ¨' },
        { id: 'food', icon: 'ðŸ”', name: 'ç¾Žé£Ÿ' },
        { id: 'travel', icon: 'âœˆï¸', name: 'æ—…è¡Œ' },
        { id: 'game', icon: 'ðŸŽ®', name: 'æ¸¸æˆ' },
        { id: 'movie', icon: 'ðŸŽ¬', name: 'ç”µå½±' },
        { id: 'music', icon: 'ðŸŽµ', name: 'éŸ³ä¹' },
        { id: 'read', icon: 'ðŸ“–', name: 'é˜…è¯»' },
        { id: 'shop', icon: 'ðŸ›’', name: 'è´­ç‰©' },
        { id: 'social', icon: 'ðŸ‘¥', name: 'ç¤¾äº¤' },
        { id: 'love', icon: 'â¤ï¸', name: 'æ‹çˆ±' },
        { id: 'family', icon: 'ðŸ‘¨â€ðŸ‘©â€ðŸ‘§', name: 'å®¶åº­' },
        { id: 'pet', icon: 'ðŸ±', name: 'å® ç‰©' }
    ]

    static quotes = [
        "ç”Ÿæ´»å°±åƒä¸€ç›’å·§å…‹åŠ›ï¼Œä½ æ°¸è¿œä¸çŸ¥é“ä¼šå¾—åˆ°ä»€ä¹ˆ",
        "æ¯å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹",
        "å¾®ç¬‘æ˜¯æœ€å¥½çš„åŒ–å¦†å“",
        "ç”Ÿæ´»æ˜¯ä¸€åœºæ—…è¡Œï¼Œäº«å—æ¯ä¸€åˆ»",
        "ç®€å•çš„å¿«ä¹æ˜¯æœ€å¥½çš„å¿«ä¹",
        'æºªæ°´ä»Žä¸æŠ±æ€¨æ›²æŠ˜ï¼Œå´èƒ½é›•åˆ»å‡ºåƒå³°ä¸‡å£‘',
        'äº‘æœµæ²¡æœ‰ç›®çš„åœ°é£˜è¡ï¼Œå´ä¸ºå¤©ç©ºå†™ä¸‹è¯—è¡Œ',
        'æ˜Ÿå…‰ä¸é—®å½’å¤„ï¼Œåªåœ¨é»‘æš—ä¸­ç‚¹äº®æ¸©æŸ”',
        'é›¨æ»´ç©¿é€å²©çŸ³ï¼Œä¸æ˜¯åŠ›é‡è€Œæ˜¯åšæŒçš„å‹‹ç« ',
        'ç§‹å¶é£˜è½æ—¶æœ€ç»šçƒ‚ï¼Œå› ä¸ºå®ƒå·²è¯»æ‡‚ç¦»åˆ«çš„ç¾Žå­¦',
        'æ—¶é’Ÿçš„æŒ‡é’ˆä¸æ˜¯åœ¨è¿½èµ¶æ—¶é—´ï¼Œè€Œæ˜¯åœ¨ä¸ˆé‡ç”Ÿå‘½çš„æµ“åº¦',
        'æ˜¨æ—¥è‹¥æ˜¯ç¾Žå¥½çš„æ ‡æœ¬ï¼Œå°±è¯·å°å­˜åœ¨è®°å¿†çš„ç‰ç’ƒç½',
        'æœªæ¥åƒæœªæ‹†å°çš„ä¿¡ç¬ºï¼Œé‡è¦çš„æ˜¯å†™å½“ä¸‹çš„çœŸå¿ƒ',
        'è€å¹´äººçœ¼è§’çš„çš±çº¹ï¼Œæ˜¯å²æœˆé¢å‘ç»™å‹‡è€…çš„å‹‹ç« ',
        'ç«¥å¹´çš„çº¸é£žæœºé£žä¸è¿‡å±‹æªï¼Œå´æ°¸è¿œç›˜æ—‹åœ¨è®°å¿†çš„å¤©ç©º',
        'å¿ƒçµçš„ä¼¤å£ç»“ç—‚åŽï¼Œä¼šç»½æ”¾å‡ºæ¯”èŠ±ç“£æ›´åšéŸ§çš„å…‰æ³½',
        'æ„¤æ€’æ˜¯çƒ§çº¢çš„é“å—ï¼Œå†·é™ä¸‹æ¥æ‰èƒ½é”»é€ æˆæœ‰ç”¨çš„å·¥å…·',
        'è‡ªç§æ˜¯å¿ƒçµçš„ç‰¢ç¬¼ï¼Œæ‰“å¼€é—¨çª—æ‰èƒ½æ‹¥æŠ±ä¸–ç•Œçš„ç¾Žå¥½',
        'çŒœç–‘æ˜¯è’™ä½çœ¼ç›çš„å¸ƒï¼ŒæŽ€å¼€å®ƒæ‰èƒ½çœ‹è§æ˜Ÿè¾°å¤§æµ·',
        'æ‚”æ¨æ˜¯é•¿åœ¨å¿ƒå£çš„åˆºé’ï¼Œæé†’æˆ‘ä»¬å¦‚ä½•æ›´å¥½åœ°çˆ±è‡ªå·±',
        'è¯´è¯åƒæ”¾é£Žç­ï¼Œçº¿å¤ªç´§ä¼šæ–­ï¼Œçº¿å¤ªæ¾ä¼šè¿·å¤±',
        'å¬è§ä¸åŒå£°éŸ³æ—¶ï¼Œä¸å¦¨å…ˆç»™è‡ªå·±çš„è€³æœµæˆ´ä¸Šä¸€æœµèŠ±',
        'äº‰æ‰§æ—¶è®°å¾—ï¼šèµ¢å®¶ä¸ä¸€å®šæ˜¯æ­£ç¡®çš„ï¼Œä½†å¿…é¡»æ˜¯ä½“é¢çš„',
        'é€äººçŽ«ç‘°æ—¶ï¼Œåˆ«å¿˜äº†ç»™è‡ªå·±ç•™ä¸€æžå¸¦åˆºçš„èŒŽç§†',
        'ç”Ÿæ´»ä¸æ˜¯å¯†å®¤é€ƒè„±ï¼Œé’¥åŒ™å°±è—åœ¨çŠ¯é”™çš„å¯†ç é‡Œ',
        'çƒ¹é¥ªçš„é¦™æ°”æ˜¯å®¶çš„æŒ‡çº¹ï¼Œå³ä½¿èµ°éä¸–ç•Œä¹Ÿèƒ½è¢«è®¤å‡º',
        'æ¸…æ™¨çš„é˜³å…‰æ˜¯å…è´¹çš„æ‹¥æŠ±ï¼Œå¤œæ™šçš„æœˆå…‰æ˜¯æ— å£°çš„æ™šå®‰',
        'è€æ—§çš„ä¹¦é¡µé‡Œè—ç€æ—¶å…‰çš„å¯†ç ï¼Œç¿»åŠ¨æ—¶ä¼šé£˜å‡ºå’–å•¡é¦™',
        'è¡£æŸœé‡Œæœ€å–œæ¬¢çš„è¡£æœï¼Œæ€»åœ¨æœ€é€‚åˆå®ƒçš„å­£èŠ‚å‡ºçŽ°',
        'è·¯è¾¹é‡ŽèŠ±çš„ç”Ÿå‘½åŠ›ï¼Œä¸åœ¨èŠ±å›­çš„æ ½åŸ¹è€Œåœ¨è‡ªç”±çš„ç”Ÿé•¿',
        'çª—å°ä¸Šçš„ç»¿èåœ¨é»˜é»˜è®¡ç®—é˜³å…‰çš„åˆ©æ¯',
        'æ²™æ¼é‡Œçš„æ¯ç²’ç ‚éƒ½æ˜¯æ—¶é—´é“¶è¡Œçš„å°è‚¡ä¸œ',
        'ç”µæ¢¯æŒ‰é’®çš„æŽ’åˆ—æš—åˆäººç”Ÿçš„è¿›é€€å“²å­¦',
        'å†°ç®±è´´ä¸‹è—ç€å®¶åº­è®°å¿†çš„æ¸©åº¦å¯†ç ',
        'å……ç”µå®çš„ç™¾åˆ†æ¯”æé†’æˆ‘ä»¬çˆ±è¦åŠæ—¶ç»­èˆª',
        'åœ°é“éš§é“çš„é£Žæ˜¯åŸŽå¸‚çš„å¿ƒè·³å£°',
        'æ»¡å¢™çš„ç½‘çº¢æ‰“å¡ç…§åƒæœªæ‹†å°çš„æ˜Žä¿¡ç‰‡',
        'å¤–å–éª‘æ‰‹çš„ç”µç“¶è½¦åˆ’ç ´é»„æ˜çš„ç­‰é«˜çº¿',
        'åŠžå…¬å®¤çš„ç»¿æ¤åœ¨æ— å£°æŠ—è®®996çš„æ—¶å·®',
        'æ™ºèƒ½æ‰‹è¡¨çš„éœ‡åŠ¨æ˜¯æ•°å­—åŒ–ç”Ÿå­˜çš„è„‰æ',
        'ä¹¦æž¶ä¸Šçš„ç•…é”€ä¹¦åƒç­‰å¾…è¢«ç¿»å¼€çš„å‘½è¿ä¹‹å·',
        'çŸ¥è¯†ä»˜è´¹è¯¾ç¨‹æ˜¯æ—¶ä»£çš„é€Ÿæº¶æ™ºæ…§èƒ¶å›Š',
        'ç¤¾äº¤åª’ä½“ç‚¹èµžæ•°æ˜¯è™šè£å¿ƒçš„æ¸©åº¦è®¡',
        'ç”µå­ä¹¦é˜…è¯»å™¨çš„å¤œé—´æ¨¡å¼è´©å–ç€å­¤ç‹¬',
        'è§†é¢‘ç½‘ç«™çš„è‡ªåŠ¨è¿žæ’­æ˜¯æ—¶é—´çš„é»‘æ´žæ¼©æ¶¡',
        'ç„¦è™‘æ˜¯å¤§è„‘çš„é”™è¯¯æŠ¥è­¦ç³»ç»Ÿ',
        'å­¤ç‹¬æ˜¯çµé­‚çš„4Ké«˜æ¸…æ¨¡å¼',
        'æ„¤æ€’æ˜¯çƒ§æ¯ç†æ™ºçš„é‡Žç«ï¼Œç°çƒ¬é‡Œè—ç€çç ',
        'æ‚²ä¼¤æ˜¯å¿ƒç¢ŽåŽé•¿å‡ºçš„æ°´æ™¶è†æ£˜',
        'å–œæ‚¦æ˜¯çµé­‚çš„çƒŸç«è¡¨æ¼”ï¼Œè½¬çž¬å³é€å´ç…§äº®æ°¸æ’',
        'å¹´é¾„ä¸æ˜¯ç”Ÿå‘½çš„åˆ»åº¦ï¼Œçš±çº¹æ‰æ˜¯æ—¶å…‰çš„ç­‰é«˜çº¿',
        'ç—…æ¯’éš”ç¦»æœŸæ˜¯è¢«è¿«æš‚åœçš„å“²å­¦è¯¾',
        'å“ºä¹³æœŸçš„æ¯äº²æ‹¥æœ‰å…¨ä¸–ç•Œæœ€æ¸©æš–çš„ç£åœº',
        'è€å¹´æ‰‹æœºçš„å­—ä½“æ”¾å¤§æ˜¯æ—¶ä»£çš„æ¸©æŸ”å¦¥å',
        'ä¸´ç»ˆå…³æ€€ç—…æˆ¿çš„ç¯å…‰æ˜¯ç”Ÿå‘½æœ€åŽçš„äº®åº¦è°ƒèŠ‚',
        'è“ç‰™è€³æœºé‡Œçš„éŸ³ä¹æ˜¯æ•°å­—åŒ–çš„çµé­‚é¿éš¾æ‰€',
        'ç”µå­ç›¸å†Œç”¨åƒç´ å›šç¦äº†è®°å¿†çš„é²œæ´»',
        'æ¸¸æˆæˆå°±ç³»ç»Ÿåœ¨è™šæ‹Ÿä¸–ç•Œè´©å–ç€å­˜åœ¨æ„Ÿ',
        'çŸ­è§†é¢‘æ»¤é•œæ˜¯çŽ°ä»£äººçš„ç¾Žé¢œè°Žè¨€',
        'äººå·¥æ™ºèƒ½å®¢æœå¬ä¸æ‡‚äººç±»æœ€æ·±çš„å¹æ¯',
        'æ³¡èŒ¶æ—¶çœ‹èŒ¶å¶æ²‰æµ®ï¼Œå¦‚åŒè§‚ç…§äººç”Ÿçš„èµ·è½',
        'æºªè¾¹åž‚é’“è€…é’“èµ·çš„ä¸æ˜¯é±¼ï¼Œæ˜¯æ—¶é—´çš„æ¶Ÿæ¼ª',
        'å®…å®¶è¿½å‰§æ—¶ï¼Œé¥æŽ§å™¨æ˜¯ç©¿è¶Šæ—¶ç©ºçš„ä»»æ„é—¨',
        'å…¬å›­é•¿æ¤…ä¸Šçœ‹äº‘å·äº‘èˆ’ï¼Œæ˜¯å…è´¹çš„å“²å­¦æ²»ç–—',
        'å¤œè·‘æ—¶çš„è€³æœºé‡Œï¼Œæ’­æ”¾ç€è‡ªæˆ‘å¯¹è¯çš„ç‹¬ç™½',
        'å…ƒå®‡å®™ä¸­çš„è™šæ‹Ÿå½¢è±¡åœ¨æ¨¡ä»¿äººç±»çš„çµé­‚çš±è¤¶',
        'æ— äººæœºé…é€çš„åŒ…è£¹é‡Œè£…ç€è¢«è§£æž„çš„äººé™…æ¸©åº¦',
        'åŸºå› ç¼–è¾‘æŠ€æœ¯æ­£åœ¨é‡å†™ç”Ÿå‘½çš„åŽŸå§‹ä»£ç ',
        'äººå·¥æ™ºèƒ½ä½œè¯—æ˜¯æœºæ¢°åœ¨æ¨¡ä»¿çµé­‚çš„é¢¤æŠ–',
        'å¤ªç©ºç«™çš„æ™¨æ˜çº¿æ˜¯äººç±»æŽ¢ç´¢æœªçŸ¥çš„åˆ»åº¦å°º',
        'æœ€æ˜Žäº®çš„æ˜Ÿç©ºåœ¨å…‰æ±¡æŸ“æœ€ä¸¥é‡çš„åŸŽå¸‚ä¸Šç©º',
        'æœ€æ·±çš„æµ·æ²Ÿé‡Œè—ç€åœ°çƒæœ€å¤è€çš„ç§˜å¯†',
        'æœ€å¿«çš„ç½‘ç»œå»¶æ—¶ç€äººç±»çš„æƒ…æ„Ÿå…±æŒ¯',
        'æœ€å…ˆè¿›çš„åŒ»ç–—æŠ€æœ¯æ²»ä¸å¥½çŽ°ä»£äººçš„ç²¾ç¥žæ„Ÿå†’',
        'æœ€è±ªåŽçš„é…’åº—æˆ¿é—´é‡Œä½ç€æœ€å­¤ç‹¬çš„çµé­‚',
        'æ—§è¯¾æ¡Œçš„åˆ»ç—•æ˜¯é’æ˜¥çš„å¯†ç æœ¬',
        'ç«è½¦ç«™ç¥¨æ ¹æ˜¯äººç”Ÿæ—…ç¨‹çš„é‚®ç¥¨æ”¶è—',
        'å·¥èµ„æ¡çš„æ•°å­—æ˜¯æˆå¹´äººçš„æ¸©åº¦è®¡',
        'åŒ»é™¢CTç‰‡çš„é˜´å½±é‡Œè—ç€ç”Ÿå‘½çš„ä¹è°±',
        'æ©¡çš®ç­‹æ‰Žå¤´å‘æ—¶ï¼Œç»¾ä½çš„æ˜¯æµé€çš„æ™¨å…‰',
        'è¯»ä¹¦æ˜¯ç»™å¤§è„‘å®‰è£…å‡çº§åŒ…',
        'å†¥æƒ³æ˜¯ç³»ç»Ÿçš„æ€æ¯’ç¨‹åº',
        'æ—…è¡Œæ˜¯ç»™çµé­‚åšCTæ‰«æ',
        'å†™ä½œæ˜¯è®°å¿†çš„3Dæ‰“å°',
        'è·³èˆžæ˜¯è‚¢ä½“çš„è‡ªç”±ç¼–ç¨‹',
        'åŠ ç­æ—çš„çœ¼è¢‹é‡Œè“„ç€æœªçœ çš„æ˜Ÿè¾°',
        'ç½‘çº¢åº—çš„æŽ’é˜Ÿé˜Ÿä¼æ˜¯çŽ°ä»£äººçš„æœåœ£è·¯çº¿',
        'ç›´æ’­é—´çš„æ‰“èµæ˜¯æ•°å­—åŒ–çš„åŠŸå¾·ç®±',
        'è‡ªåŠ¨è´©å–æœºæä¾›24å°æ—¶çš„äººç”Ÿé€‰æ‹©',
        'å¯†å®¤é€ƒè„±æ¸¸æˆæ˜¯æˆå¹´äººçŽ©çš„çŽ°å®žè§£è°œ',
        'é˜³å°çš„å¤šè‚‰æ¤ç‰©åœ¨è®¡ç®—é˜³å…‰çš„åˆ©æ¯',
        'æ™¾è¡£ç»³ä¸Šçš„è¡¬è¡«åœ¨è·³ç€é£Žçš„èŠ­è•¾',
        'åŽ¨æˆ¿æ²¹çƒŸæœºçš„è½°é¸£æ˜¯ç¾Žé£Ÿçš„äº¤å“ä¹å‰å¥',
        'å«ç”Ÿé—´çš„é•œå­æ¯å¤©æ¸…æ™¨éƒ½é‡æ–°å‘æ˜Žä¸–ç•Œ',
        'æ¥¼é“å£°æŽ§ç¯æ˜¯å¤œæ™šçš„å®ˆå¤œäºº',
        'æˆ‘ä»¬ç”¨æ‰‹æœºæ‹æ‘„ä¸–ç•Œï¼Œå´é—å¤±äº†å‡è§†çš„èƒ½åŠ›',
        'é€‰æ‹©å›°éš¾ç—‡æ˜¯è‡ªç”±æ„å¿—çš„ç”œèœœå‰¯ä½œç”¨',
        'å®Œç¾Žä¸»ä¹‰æ˜¯ç»™è‡ªå·±è®¾å®šçš„ç²¾ç¥žè¿·å®«',
        'ç¤¾äº¤ææƒ§ç—‡æ˜¯ä¿æŒçµé­‚çº¯åº¦çš„å…ç–«ç³»ç»Ÿ',
        'å­˜åœ¨ç„¦è™‘æ˜¯ç”Ÿå‘½æ„è¯†è§‰é†’çš„å‰¯äº§å“',
    ]

    static getRandomQuote() {
        const index = Math.floor(Math.random() * this.quotes.length);
        return this.quotes[index];
    }

    static getActivityById(id) {
        return this.activities.find(activity => activity.id === id)
    }

    static loadAllActivity() {
        const key = 'mood_activities'
        return uni.getStorageSync(key) || this.activities;
    }

    static saveActivity(records) {
        uni.setStorageSync('mood_activities', records);
    }

    static addActivity(icon, name) {
        let totals = this.loadAllActivity()
        // åˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤çš„
        let findIndex = totals.findIndex(e => e.icon == icon && e.name == name);
        if (findIndex !== -1) {
            // å‡ºçŽ°äº†é‡å¤
            uni.showToast({
                title: 'æ´»åŠ¨å·²å­˜åœ¨',
                icon: 'none',
                duration: 2000
            });
            return totals;
        }

        totals.push({
            id: Date.now(),
            icon: icon,
            name: name
        })
        this.saveActivity(totals);
        return totals;
    }


    /**
     *  åˆ é™¤æ ‡ç­¾
     * @param {æ ‡ç­¾id} id 
     * @returns 
     */
    static deleteActivity(id) {
        let totals = this.loadAllActivity();
        const filteredEvents = totals.filter(e => e.id !== id);
        if (events.length !== filteredEvents.length) {
            this.saveActivity(filteredEvents);
            return true;
        }
        return false;
    }

    static updateActivity(activity) {
        if (!activity.id) {
            return this.addActivity(activity.icon, activity.name);
        }

        let totals = this.loadAllActivity();
        const index = totals.findIndex(e => e.id === activity.id);
        if (index !== -1) {
            // åšæ›´æ–°é€»è¾‘
            totals[index] = activity;
            this.saveActivity(totals);
            return true;
        } else {
            // åšæ–°å¢žé€»è¾‘
            totals.push(activity);
            this.saveActivity(totals);
            return true;
        }
    }

    static getMoodKey(cell) {
        let { type, year, month, day } = cell;
        if (!type) {
            if (day) type = 'day';
            else if (month) type = 'month';
            else type = 'year';
        }
        let key = `moods_${type}_${year}`;
        if (type == 'year') return key;
        if (month !== undefined && month != null) key += `_${month}`;
        if (type == 'month') return key;
        if (day !== undefined && day != null) key += `_${day}`;
        return key;
    }

    /**
     * æŸ¥è¯¢æŸä¸€å¤©/æœˆ/å¹´çš„å¿ƒæƒ…æ—¥å¿—åˆ—è¡¨
     * @param {å¹´æœˆæ—¥-ç±»åž‹} cell 
     * @returns 
     */
    static getMoods(cell) {
        const key = this.getMoodKey(cell);
        console.log('æŸ¥è¯¢æŸä¸€å¤©/æœˆ/å¹´çš„å¿ƒæƒ…æ—¥å¿—åˆ—è¡¨', cell, key);
        return uni.getStorageSync(key) || []
    }

    /**
     * æŸ¥è¯¢æŸä¸€ä¸ªå…·ä½“çš„å¿ƒæƒ…æ—¥å¿—
     * @param {å¹´æœˆæ—¥-ç±»åž‹} cell 
     * @param {å¿ƒæƒ…æ—¥å¿—id} id 
     * @returns 
     */
    static getMood(cell, id) {
        const moods = this.getMoods(cell);
        if (moods.length === 0) return null;
        return moods.find(e => e.id == id)
    }

    static insertMood(cell, moods) {
        const key = this.getMoodKey(cell);
        console.log('å¿ƒæƒ…å¯¹åº”çš„keyæ˜¯', key);
        uni.setStorageSync(key, moods);
    }

    static buildCell(mood) {
        let { year, month, day } = DateUtil.parseDateString(mood.moodDate.date)
        return {
            type: mood.type,
            year: year,
            month: month,
            day: day
        };
    }

    /**
  * æ ¹æ®moodDateä¸­çš„timeè¿›è¡Œå€’æŽ’
  * @param {Array} moods - å¿ƒæƒ…æ•°ç»„
  * @returns {Array} æŽ’åºåŽçš„å¿ƒæƒ…æ•°ç»„
  */
    static sortMoodsByTime(moods) {
        return moods.sort((a, b) => {
            const timeA = a.moodDate.time.split(':').map(Number);
            const timeB = b.moodDate.time.split(':').map(Number);
            const dateA = new Date(0, 0, 0, timeA[0], timeA[1]);
            const dateB = new Date(0, 0, 0, timeB[0], timeB[1]);
            return dateB - dateA; // å€’åºæŽ’åº
        });
    }


    static saveMood(mood) {
        const cell = this.buildCell(mood);
        const moods = this.getMoods(cell);
        // åˆ¤æ–­æ˜¯å¦å­˜åœ¨é‡å¤çš„
        let findIndex = moods.findIndex(e => e.id === mood.id);
        if (findIndex !== -1) {
            // é‡‡ç”¨æ›´æ–°é€»è¾‘
            moods[findIndex] = mood;
        } else {
            // æ–°å¢ž
            moods.push(mood);
        }
        this.sortMoodsByTime(moods);
        this.insertMood(cell, moods);
        console.log('ä¿å­˜å¿ƒæƒ…è®°å½•:', cell, JSON.stringify(moods));
    }

    static deleteMoodByDetail(mood) {
        const cell = this.buildCell(mood);
        this.deleteMoodById(cell, mood.id);
    }

    static deleteMoodById(cell, id) {
        const key = this.getMoodKey(cell);
        let records = this.getMoods(cell);
        const filteredEvents = records.filter(e => e.id !== id);
        if (records.length !== filteredEvents.length) {
            // åˆ é™¤æ—¥å¿—
            uni.setStorageSync(key, filteredEvents);
            return true;
        }
        return false;
    }
}